<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="contoh" language="groovy" pageWidth="421" pageHeight="595" columnWidth="381" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="a8dcfcf1-63fd-4ab7-8dc0-ed8cc0ecc671">
	<property name="ireport.zoom" value="1.7715610000000022"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="reportParams.titleReport" class="java.lang.String"/>
	<parameter name="reportParams.payrollId" class="java.lang.String"/>
	<parameter name="reportParams.urlLogo" class="java.lang.String"/>
	<parameter name="reportParams.branchId" class="java.lang.String"/>
	<parameter name="reportParams.branchName" class="java.lang.String"/>
	<parameter name="reportParams.alamatSurat" class="java.lang.String"/>
	<parameter name="reportParams.date" class="java.lang.String"/>
	<parameter name="reportParams.areaId" class="java.lang.String"/>
	<parameter name="reportParams.tahun" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="reportParams.bulan" class="java.lang.String"/>
	<queryString>
		<![CDATA[select
   payroll.*,
   case
      when to_date('01' || '-' || $P{reportParams.bulan} || '-' || $P{reportParams.tahun}, 'DD-MM-YYYY') - INTERVAL '1 YEAR' < peg.tanggal_masuk  then
         (to_date('01' || '-' || $P{reportParams.bulan} || '-' || $P{reportParams.tahun}, 'DD-MM-YYYY')  - peg.tanggal_masuk + 1) / 30
      else 12 end as bulan_aktif
from
   it_hris_payroll payroll
   left join im_hris_pegawai peg on peg.nip = payroll.nip
where payroll.tipe_payroll = 'TH'
and payroll.tahun = $P{reportParams.tahun}
and payroll.bulan = $P{reportParams.bulan}
and payroll.branch_id = $P{reportParams.branchId}]]>
	</queryString>
	<field name="payroll_id" class="java.lang.String"/>
	<field name="payroll_header_id" class="java.lang.String"/>
	<field name="tipe_payroll" class="java.lang.String"/>
	<field name="bulan" class="java.lang.String"/>
	<field name="tahun" class="java.lang.String"/>
	<field name="tahun_skala_gaji" class="java.lang.String"/>
	<field name="nip" class="java.lang.String"/>
	<field name="nip_lama" class="java.lang.String"/>
	<field name="nama_pegawai" class="java.lang.String"/>
	<field name="gelar" class="java.lang.String"/>
	<field name="position_id" class="java.lang.String"/>
	<field name="position_name" class="java.lang.String"/>
	<field name="golongan_id" class="java.lang.String"/>
	<field name="golongan_name" class="java.lang.String"/>
	<field name="department_id" class="java.lang.String"/>
	<field name="department_name" class="java.lang.String"/>
	<field name="sub_divisi" class="java.lang.String"/>
	<field name="sub_divisi_name" class="java.lang.String"/>
	<field name="kelompok_position_id" class="java.lang.String"/>
	<field name="kelompok_position_name" class="java.lang.String"/>
	<field name="profesi_id" class="java.lang.String"/>
	<field name="profesi_name" class="java.lang.String"/>
	<field name="branch_id" class="java.lang.String"/>
	<field name="branch_name" class="java.lang.String"/>
	<field name="golongan_dapen" class="java.lang.String"/>
	<field name="grade_level" class="java.lang.Integer"/>
	<field name="tipe_pegawai_id" class="java.lang.String"/>
	<field name="tipe_pegawai_name" class="java.lang.String"/>
	<field name="status_pegawai_id" class="java.lang.String"/>
	<field name="status_pegawai_name" class="java.lang.String"/>
	<field name="jenis_pegawai_id" class="java.lang.String"/>
	<field name="jenis_pegawai_name" class="java.lang.String"/>
	<field name="dapen_id" class="java.lang.String"/>
	<field name="dapen_name" class="java.lang.String"/>
	<field name="status_keluarga" class="java.lang.String"/>
	<field name="jumlah_anak" class="java.lang.Integer"/>
	<field name="jumlah_anak_ditanggung" class="java.lang.Integer"/>
	<field name="npwp" class="java.lang.String">
		<fieldDescription><![CDATA[Alamat Master]]></fieldDescription>
	</field>
	<field name="no_rek_bank" class="java.lang.String"/>
	<field name="nama_bank" class="java.lang.String"/>
	<field name="gender" class="java.lang.String"/>
	<field name="masa_kerja_gol" class="java.lang.Integer"/>
	<field name="masa_kerja" class="java.lang.Integer"/>
	<field name="tanggal_aktif" class="java.sql.Date"/>
	<field name="tanggal_akhir_kontrak" class="java.sql.Date"/>
	<field name="tanggal_pra_pensiun" class="java.sql.Date"/>
	<field name="tanggal_pensiun" class="java.sql.Date"/>
	<field name="tanggal_keluar" class="java.sql.Date"/>
	<field name="tanggal_awal_lembur" class="java.sql.Date"/>
	<field name="tanggal_akhir_lembur" class="java.sql.Date"/>
	<field name="kodering" class="java.lang.String"/>
	<field name="gaji_pensiun" class="java.math.BigDecimal"/>
	<field name="gaji_pensiun_bpjs" class="java.math.BigDecimal"/>
	<field name="gaji_pokok" class="java.math.BigDecimal"/>
	<field name="gaji_kotor" class="java.math.BigDecimal"/>
	<field name="thp" class="java.math.BigDecimal"/>
	<field name="gaji_bersih" class="java.math.BigDecimal"/>
	<field name="total_a" class="java.math.BigDecimal"/>
	<field name="total_b" class="java.math.BigDecimal"/>
	<field name="total_c" class="java.math.BigDecimal"/>
	<field name="total_d" class="java.math.BigDecimal"/>
	<field name="total_rlab" class="java.math.BigDecimal"/>
	<field name="tunjungan_sankhus" class="java.math.BigDecimal"/>
	<field name="tunjangan_umk" class="java.math.BigDecimal"/>
	<field name="tunjangan_struktural" class="java.math.BigDecimal"/>
	<field name="tunjangan_peralihan" class="java.math.BigDecimal"/>
	<field name="tunjangan_jabatan_struktural" class="java.math.BigDecimal"/>
	<field name="tunjangan_strategis" class="java.math.BigDecimal"/>
	<field name="kompensasi" class="java.math.BigDecimal"/>
	<field name="tunjangan_transport" class="java.math.BigDecimal"/>
	<field name="tunjangan_air_listrik" class="java.math.BigDecimal"/>
	<field name="tunjangan_pengobatan" class="java.math.BigDecimal"/>
	<field name="tunjangan_perumahan" class="java.math.BigDecimal"/>
	<field name="tunjangan_air" class="java.math.BigDecimal"/>
	<field name="tunjangan_listrik" class="java.math.BigDecimal"/>
	<field name="tunjangan_bbm" class="java.math.BigDecimal"/>
	<field name="tunjangan_fungsional" class="java.math.BigDecimal"/>
	<field name="tunjangan_tambahan" class="java.math.BigDecimal"/>
	<field name="tunjangan_pph" class="java.math.BigDecimal"/>
	<field name="tunjangan_baju_dinas" class="java.math.BigDecimal"/>
	<field name="tunjangan_lain" class="java.math.BigDecimal"/>
	<field name="tunjangan_lembur" class="java.math.BigDecimal"/>
	<field name="peralihan_gapok" class="java.math.BigDecimal"/>
	<field name="peralihan_sankhus" class="java.math.BigDecimal"/>
	<field name="peralihan_tunjangan" class="java.math.BigDecimal"/>
	<field name="tunjangan_pemondokan" class="java.math.BigDecimal"/>
	<field name="tunjangan_komunikasi" class="java.math.BigDecimal"/>
	<field name="tunjangan_supervisi" class="java.math.BigDecimal"/>
	<field name="tunjangan_lokal" class="java.math.BigDecimal"/>
	<field name="tunjangan_siaga" class="java.math.BigDecimal"/>
	<field name="pph_gaji" class="java.math.BigDecimal"/>
	<field name="pph_pengobatan" class="java.math.BigDecimal"/>
	<field name="pph_seharusnya" class="java.math.BigDecimal"/>
	<field name="selisih_pph" class="java.math.BigDecimal"/>
	<field name="tunjangan_dapen" class="java.math.BigDecimal"/>
	<field name="persen_dapen_kary" class="java.math.BigDecimal"/>
	<field name="persen_dapen_pers" class="java.math.BigDecimal"/>
	<field name="iuran_dapen_kary" class="java.math.BigDecimal"/>
	<field name="iuran_dapen_pers" class="java.math.BigDecimal"/>
	<field name="iuran_kopkar" class="java.math.BigDecimal"/>
	<field name="iuran_sp" class="java.math.BigDecimal"/>
	<field name="iuran_piikb" class="java.math.BigDecimal"/>
	<field name="iuran_bank_mandiri" class="java.math.BigDecimal"/>
	<field name="iuran_bank_bri" class="java.math.BigDecimal"/>
	<field name="iuran_infaq" class="java.math.BigDecimal"/>
	<field name="iuran_perkes_dan_obat" class="java.math.BigDecimal"/>
	<field name="iuran_listrik" class="java.math.BigDecimal"/>
	<field name="iuran_profesi" class="java.math.BigDecimal"/>
	<field name="iuran_potongan_lain" class="java.math.BigDecimal"/>
	<field name="tambahan_lain" class="java.math.BigDecimal"/>
	<field name="uang_muka_lainnya" class="java.math.BigDecimal"/>
	<field name="kekurangan_bpjs_tk" class="java.math.BigDecimal"/>
	<field name="pengobatan" class="java.math.BigDecimal"/>
	<field name="koperasi" class="java.math.BigDecimal"/>
	<field name="dansos" class="java.math.BigDecimal"/>
	<field name="sp" class="java.math.BigDecimal"/>
	<field name="bazis" class="java.math.BigDecimal"/>
	<field name="bapor" class="java.math.BigDecimal"/>
	<field name="zakat" class="java.math.BigDecimal"/>
	<field name="lain_lain" class="java.math.BigDecimal"/>
	<field name="umr" class="java.math.BigDecimal"/>
	<field name="total_potongan_lain" class="java.math.BigDecimal"/>
	<field name="ptkp_pegawai" class="java.math.BigDecimal"/>
	<field name="tunjangan_bpjs_ks" class="java.math.BigDecimal"/>
	<field name="tunjangan_bpjs_tk" class="java.math.BigDecimal"/>
	<field name="total_iuran_bpjs_tk_kary" class="java.math.BigDecimal"/>
	<field name="total_iuran_bpjs_tk_pers" class="java.math.BigDecimal"/>
	<field name="min_bpjs_ks" class="java.math.BigDecimal"/>
	<field name="max_bpjs_ks" class="java.math.BigDecimal"/>
	<field name="persen_bpjs_ks_kary" class="java.math.BigDecimal"/>
	<field name="persen_bpjs_ks_pers" class="java.math.BigDecimal"/>
	<field name="min_bpjs_tk" class="java.math.BigDecimal"/>
	<field name="max_bpjs_tk" class="java.math.BigDecimal"/>
	<field name="persen_bpjs_tk_iuran_kary" class="java.math.BigDecimal"/>
	<field name="persen_bpjs_tk_jpk_kary" class="java.math.BigDecimal"/>
	<field name="persen_bpjs_tk_jkk_pers" class="java.math.BigDecimal"/>
	<field name="persen_bpjs_tk_jht_pers" class="java.math.BigDecimal"/>
	<field name="persen_bpjs_tk_jkm_pers" class="java.math.BigDecimal"/>
	<field name="persen_bpjs_tk_jpk_pers" class="java.math.BigDecimal"/>
	<field name="dasar_bpjs_ks" class="java.math.BigDecimal"/>
	<field name="dasar_bpjs_tk" class="java.math.BigDecimal"/>
	<field name="iuran_bpjs_ks_kary" class="java.math.BigDecimal"/>
	<field name="iuran_bpjs_ks_pers" class="java.math.BigDecimal"/>
	<field name="iuran_bpjs_tk_kary" class="java.math.BigDecimal"/>
	<field name="jpk_bpjs_tk_kary" class="java.math.BigDecimal"/>
	<field name="jkk_bpjs_tk_pers" class="java.math.BigDecimal"/>
	<field name="jht_bpjs_tk_pers" class="java.math.BigDecimal"/>
	<field name="jkm_bpjs_tk_pers" class="java.math.BigDecimal"/>
	<field name="jpk_bpjs_tk_pers" class="java.math.BigDecimal"/>
	<field name="multifikator" class="java.math.BigDecimal"/>
	<field name="created_who" class="java.lang.String"/>
	<field name="last_update_who" class="java.lang.String"/>
	<field name="flag" class="java.lang.String"/>
	<field name="action" class="java.lang.String"/>
	<field name="created_date" class="java.sql.Timestamp"/>
	<field name="last_update" class="java.sql.Timestamp"/>
	<field name="bulan_aktif" class="java.lang.Integer"/>
	<pageHeader>
		<band height="82" splitType="Stretch">
			<image>
				<reportElement x="320" y="3" width="50" height="50" uuid="c252741d-c95f-46b9-b389-2aa80b30778f"/>
				<imageExpression><![CDATA[com.google.zxing.client.j2se.MatrixToImageWriter.toBufferedImage(
new com.google.zxing.qrcode.QRCodeWriter().encode(
"THR ID " + $F{payroll_id} + "\nPeriode : "+$P{reportParams.tahun} ,
com.google.zxing.BarcodeFormat.QR_CODE, 300, 300))]]></imageExpression>
			</image>
			<line>
				<reportElement x="2" y="73" width="378" height="1" uuid="d94f6e6d-b6e4-4353-ad1a-3d9ccd510296"/>
			</line>
			<image>
				<reportElement x="2" y="10" width="77" height="28" uuid="bbb62cb0-8933-48b9-af6d-7fb8c13a2d08"/>
				<imageExpression><![CDATA[$P{reportParams.urlLogo}]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="286" y="50" width="79" height="20" uuid="fe6c3fa6-51d9-4a00-8643-ac3634c33659"/>
				<textElement verticalAlignment="Top">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Printed Date :]]></text>
			</staticText>
			<textField>
				<reportElement x="346" y="50" width="80" height="20" uuid="9f8e8b73-0360-45f8-bcdd-fcd0857e476e"/>
				<textElement verticalAlignment="Top">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{reportParams.date}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="2" y="40" width="170" height="20" uuid="0c8a3f21-8be0-420b-befc-5e20eb62c2f8"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{reportParams.areaId}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="134" y="11" width="116" height="25" uuid="d387ade1-3237-4c58-969e-22dba485a056"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[SLIP GAJI THR]]></text>
			</staticText>
			<textField>
				<reportElement x="2" y="55" width="100" height="20" uuid="e1422cdd-77a2-4e40-9540-cff6d5da2bb6"/>
				<textFieldExpression><![CDATA[$F{branch_name}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="473" splitType="Stretch">
			<staticText>
				<reportElement x="166" y="54" width="14" height="20" uuid="ffa57a36-d733-4661-8012-842f1780e036"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[:]]></text>
			</staticText>
			<textField>
				<reportElement x="180" y="34" width="168" height="20" uuid="61222c14-2fe3-4ebc-8a23-9c7dbdc5b0f8"/>
				<textFieldExpression><![CDATA[$F{nama_pegawai}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="180" y="74" width="168" height="20" uuid="246e9925-bd02-4bac-91e8-95221b82304d"/>
				<textFieldExpression><![CDATA[$F{golongan_name}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="22" y="54" width="100" height="20" uuid="29a40664-e2c8-4e86-9539-2ed04a3b23e6"/>
				<text><![CDATA[Jabatan]]></text>
			</staticText>
			<textField>
				<reportElement x="180" y="54" width="168" height="20" uuid="1a23f84f-0d38-427a-a910-371175052347"/>
				<textFieldExpression><![CDATA[$F{position_name}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="166" y="34" width="14" height="20" uuid="06330344-afcc-4402-89a3-6f01e2efee8c"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[:]]></text>
			</staticText>
			<staticText>
				<reportElement x="22" y="34" width="100" height="20" uuid="2c4d7475-41a7-41e8-9032-d3e631a279c7"/>
				<text><![CDATA[Nama]]></text>
			</staticText>
			<staticText>
				<reportElement x="22" y="14" width="100" height="20" uuid="cf23d308-2228-45ac-a30c-c7512d175fd0"/>
				<text><![CDATA[Nip]]></text>
			</staticText>
			<staticText>
				<reportElement x="166" y="14" width="14" height="20" uuid="48755514-3823-483f-a48e-6850c0af2dcb"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[:]]></text>
			</staticText>
			<staticText>
				<reportElement x="166" y="74" width="14" height="20" uuid="addfef75-b3e1-462f-8c02-0dbe436eb7a1"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[:]]></text>
			</staticText>
			<textField>
				<reportElement x="180" y="14" width="168" height="20" uuid="b53326e9-7539-4a15-a3e2-5fe25379aee8"/>
				<textFieldExpression><![CDATA[$F{nip}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="22" y="74" width="100" height="20" uuid="4095a61d-8662-459e-9403-c288b9403263"/>
				<text><![CDATA[Golongan]]></text>
			</staticText>
			<staticText>
				<reportElement x="166" y="114" width="14" height="20" uuid="5c4b487c-0d01-4969-8802-8ef8c8db908c"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[:]]></text>
			</staticText>
			<staticText>
				<reportElement x="22" y="114" width="135" height="20" uuid="96c4e38b-0df2-4681-b9ce-4f26c4ce3312"/>
				<text><![CDATA[Total Nilai Thr (Sebelum Pph)]]></text>
			</staticText>
			<staticText>
				<reportElement x="22" y="94" width="100" height="20" uuid="cd801f60-1279-4f1c-9905-b4e6e3f50636"/>
				<text><![CDATA[Bulan Aktif]]></text>
			</staticText>
			<staticText>
				<reportElement x="166" y="94" width="14" height="20" uuid="2ecc0ed0-83e1-478b-bc81-6b50dd4d08e3"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[:]]></text>
			</staticText>
			<textField>
				<reportElement x="180" y="94" width="168" height="20" uuid="9905e35e-827c-445b-bbbd-7388dad89728"/>
				<textFieldExpression><![CDATA[$F{bulan_aktif}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="22" y="154" width="135" height="20" uuid="2d44b4d7-668a-402f-a930-6a94d6bfd111"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[THR di terima]]></text>
			</staticText>
			<staticText>
				<reportElement x="166" y="154" width="14" height="20" uuid="7a6879d5-9290-405b-a84d-b07cbf95c2b9"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[:]]></text>
			</staticText>
			<textField pattern="#,##0">
				<reportElement x="180" y="154" width="86" height="20" uuid="bc1c2494-82c1-46dd-9e83-f53b4dd5bb4b"/>
				<textElement textAlignment="Right">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{gaji_bersih}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="166" y="134" width="14" height="20" uuid="82e08378-6f7c-4288-80ea-9b61cc82f017"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[:]]></text>
			</staticText>
			<staticText>
				<reportElement x="22" y="134" width="135" height="20" uuid="89c17abf-4821-40c4-ad51-3d4aa620e724"/>
				<text><![CDATA[PPH THR]]></text>
			</staticText>
			<textField pattern="#,##0">
				<reportElement x="180" y="134" width="86" height="20" uuid="71242805-462e-4148-b5ec-2f819bd10ef8"/>
				<textElement textAlignment="Right" verticalAlignment="Top"/>
				<textFieldExpression><![CDATA[$F{pph_gaji}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="180" y="114" width="86" height="20" uuid="4515f6bc-05f3-42b2-b4ae-82dc9db3adcb"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$F{gaji_kotor}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
