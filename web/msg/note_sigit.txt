-- 2020-06-08 >>>

    CREATE SEQUENCE sq_antrian_telemedic;

    -- Table: public.it_simrs_antrian_telemedic

    -- DROP TABLE public.it_simrs_antrian_telemedic;

    CREATE TABLE public.it_simrs_antrian_telemedic
    (
        id character varying(50) COLLATE pg_catalog."default" NOT NULL,
        id_pasien character varying(50) COLLATE pg_catalog."default",
        id_dokter character varying(50) COLLATE pg_catalog."default",
        id_pelayanan character varying(50) COLLATE pg_catalog."default",
        flag_resep character varying(1) COLLATE pg_catalog."default",
        status character varying(1) COLLATE pg_catalog."default",
        biaya_konsultasi numeric,
        flag_bayar_konsultasi character varying(1) COLLATE pg_catalog."default",
        flag_bayar_resep character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        no_kartu character varying(100) COLLATE pg_catalog."default",
        id_jenis_periksa_pasien character varying(30) COLLATE pg_catalog."default",
        id_asuransi character varying(30) COLLATE pg_catalog."default",
        CONSTRAINT pk_antrian_telemedic PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.it_simrs_antrian_telemedic
        OWNER to postgres;

--


-- 2020-06-10 >>>


    ALTER TABLE public.im_roles ALTER COLUMN role_name TYPE VARCHAR(100) USING role_name::VARCHAR(100);



    -- Table: public.it_simrs_pembayaran_online

    -- DROP TABLE public.it_simrs_pembayaran_online;

    CREATE TABLE public.it_simrs_pembayaran_online
    (
        id character varying(100) COLLATE pg_catalog."default" NOT NULL,
        id_item character varying(30) COLLATE pg_catalog."default",
        keterangan character varying(50) COLLATE pg_catalog."default",
        id_antrian_telemedic character varying(100) COLLATE pg_catalog."default",
        url_foto_bukti character varying(1000) COLLATE pg_catalog."default",
        approved_flag character varying(1) COLLATE pg_catalog."default",
        approved_who character varying(100) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        nominal numeric,
        id_riwayat_tindakan character varying(50) COLLATE pg_catalog."default",
        CONSTRAINT pk_pembayaran_online PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.it_simrs_pembayaran_online
        OWNER to postgres;



    -- SEQUENCE: public.seq_pembayaran_online

    -- DROP SEQUENCE public.seq_pembayaran_online;

    CREATE SEQUENCE public.seq_pembayaran_online
        INCREMENT 1
        START 1
        MINVALUE 1
        MAXVALUE 9223372036854775807
        CACHE 1;

    ALTER SEQUENCE public.seq_pembayaran_online
        OWNER TO postgres;

    ALTER TABLE public.it_simrs_pembayaran_online ALTER COLUMN kode_bank TYPE VARCHAR(10) USING kode_bank::VARCHAR(10);

    ALTER TABLE public.it_simrs_antrian_telemedic ADD branch_id VARCHAR(10) NULL;


--

-- 2020-06-12 >>>

    ALTER TABLE public.it_simrs_header_checkup ADD id_antrian_online VARCHAR(100) NULL;
    ALTER TABLE public.it_simrs_header_detail_checkup ADD id_transaksi_online VARCHAR(100) NULL;
    ALTER TABLE public.mt_simrs_permintaan_resep ADD id_transaksi_online VARCHAR(100) NULL;

--

-- 2020-06-16 >>>

    CREATE SEQUENCE seq_resep_online;

    -- Table: public.it_simrs_resep_online

    -- DROP TABLE public.it_simrs_resep_online;

    CREATE TABLE public.it_simrs_resep_online
    (
        id character varying(50) COLLATE pg_catalog."default" NOT NULL,
        id_transaksi_online character varying(50) COLLATE pg_catalog."default",
        id_obat character varying(30) COLLATE pg_catalog."default",
        id_pelayanan character varying(30) COLLATE pg_catalog."default",
        qty bigint,
        harga numeric,
        sub_total numeric,
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        id_dokter character varying(30) COLLATE pg_catalog."default",
        ttd_dokter text COLLATE pg_catalog."default",
        CONSTRAINT it_simrs_resep_online_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.it_simrs_resep_online
        OWNER to postgres;

    ALTER TABLE it_akun_saldo_akhir_detail
        ADD COLUMN kd_barang VARCHAR(100);

--

-- 2020-06-17 >>>

    ALTER TABLE public.it_simrs_resep_online ADD keterangan TEXT NULL;

    ALTER TABLE im_hris_pegawai
        ADD COLUMN position_plt_id VARCHAR(30);

    ALTER TABLE im_hris_pegawai
        ADD COLUMN nip_lama VARCHAR(50);

    ALTER TABLE im_branches
        ADD COLUMN max_pengajuan_biaya NUMERIC;

    ALTER TABLE im_branches
        ADD COLUMN coa_rk NUMERIC;

    ALTER TABLE im_akun_trans
        ADD COLUMN flag_pengajuan_biaya VARCHAR(50);

    ALTER TABLE it_akun_jurnal
        ADD COLUMN pengajuan_biaya_id VARCHAR(50);
--

-- 2020-06-18 >>>

    CREATE TABLE public.it_simrs_pengiriman_obat
    (
        id VARCHAR(50),
        id_kurir VARCHAR(50),
        id_resep VARCHAR(50),
        flag_pickup VARCHAR(1),
        flag_diterima_pasien VARCHAR(1),
        id_pasien VARCHAR(30),
        flag VARCHAR(1),
        action VARCHAR(1),
        id_pelayanan VARCHAR(30),
        branch_id VARCHAR(10),
        created_date TIMESTAMP WITHOUT TIME ZONE,
        created_who VARCHAR(100),
        last_update TIMESTAMP WITHOUT TIME ZONE,
        last_update_who VARCHAR(100)
    );

    ALTER TABLE public.it_simrs_pengiriman_obat ADD CONSTRAINT it_simrs_pengiriman_obat_id_pk PRIMARY KEY (id);

    CREATE SEQUENCE seq_pengiriman_obat;

    ALTER TABLE it_simrs_pengiriman_obat
        ADD COLUMN desa_id VARCHAR(30),
        ADD alamat text,
        ADD no_telp VARCHAR(30);
--

-- 2020-06-22 >>>

    -- function Pengiriman Obat ==========

    "Search Pengiriman Obat"        "/reseponline/searchApprovedResep_reseponline.action"
    "init form Pengiriman Obat"     "/reseponline/initForm_reseponline.action"
    "Pengiriman Obat"               "/reseponline/initForm_reseponline.action" (Menu) parent -> menu utama

    role : admin apotek

    -- ===================================

    # function :
    - search verifikasi online		/onlinepaymentverif/search_onlinepaymentverif.action
    - init form online verifikasi	/onlinepaymentverif/initForm_onlinepaymentverif.action
    - Verifikasi Pembayaran			/onlinepaymentverif/initForm_onlinepaymentverif.action (Menu)

    # role :
    - VERIFIKATOR PEMBAYARAN ONLINE

    -- Table: public.it_simrs_pemesanan_resep_online

    -- DROP TABLE public.it_simrs_pemesanan_resep_online;

    CREATE TABLE public.it_simrs_pemesanan_resep_online
    (
        id character varying(50) COLLATE pg_catalog."default" NOT NULL,
        id_pasien character varying(50) COLLATE pg_catalog."default",
        url_foto_resep text COLLATE pg_catalog."default",
        id_resep character varying(30) COLLATE pg_catalog."default",
        id_apoteker character varying(30) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action integer,
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        id_transaksi_online character varying(50) COLLATE pg_catalog."default",
        CONSTRAINT pk_pemesanan_resep_online PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.it_simrs_pemesanan_resep_online
        OWNER to postgres;

    ALTER TABLE it_simrs_antrian_telemedic
    ADD COLUMN flag_eresep VARCHAR(1),
    ADD COLUMN url_foto_resep text;
--

-- 2020-06-26 >>>
    ALTER TABLE it_simrs_antrian_telemedic ADD COLUMN jumlah_cover NUMERIC;
--

-- 2020-06-29 >>>
    ALTER TABLE it_simrs_antrian_telemedic
    ADD COLUMN no_jurnal VARCHAR(30);
--

-- 2020-06-30 >>>
    ALTER TABLE it_simrs_antrian_telemedic
    ADD COLUMN no_sep VARCHAR(50);

    ALTER TABLE it_simrs_antrian_telemedic
    ADD COLUMN id_diagnosa VARCHAR(10),
    ADD COLUMN ket_diagnosa TEXT;

    ALTER TABLE it_simrs_pengiriman_obat
    ADD COLUMN flag_terkirim VARCHAR(1);
--/

-- 2020-07-08 >>>
    CREATE SEQUENCE seq_kandungan_obat;
    CREATE SEQUENCE seq_kandungan_obat_detail;

    CREATE TABLE public.im_simrs_kandungan_obat
    (
        id_kandungan character varying(30) COLLATE pg_catalog."default" NOT NULL,
        kandungan character varying(100) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT pk_kandungan_obat PRIMARY KEY (id_kandungan)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.im_simrs_kandungan_obat
        OWNER to postgres;


    CREATE TABLE public.im_simrs_kandungan_obat_detail
    (
        id character varying(50) COLLATE pg_catalog."default" NOT NULL,
        id_obat character varying(30) COLLATE pg_catalog."default",
        id_kandungan character varying(30) COLLATE pg_catalog."default",
        bentuk character varying(30) COLLATE pg_catalog."default",
        sediaan numeric,
        satuan_sediaan character varying(30) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT pk_kandungan_obat_detail PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.im_simrs_kandungan_obat_detail
        OWNER to postgres;
--/

-- 2020-07-16 >>>
    -- Table: public.im_simrs_setting_harga_pengiriman

    -- DROP TABLE public.im_simrs_setting_harga_pengiriman;

    CREATE TABLE public.im_simrs_setting_harga_pengiriman
    (
        id character varying(30) COLLATE pg_catalog."default" NOT NULL,
        tipe character varying(50) COLLATE pg_catalog."default",
        branch_id character varying(5) COLLATE pg_catalog."default",
        harga numeric,
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT im_simrs_setting_harga_pengiriman_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.im_simrs_setting_harga_pengiriman
        OWNER to postgres;

    CREATE SEQUENCE seq_setting_harga_pengiriman;
--

-- 2020-07-17 >>>
    ALTER TABLE it_simrs_header_detail_checkup
    ADD COLUMN cover_diatanggung numeric;

    -- Table: public.it_simrs_struk_asuransi

    -- DROP TABLE public.it_simrs_struk_asuransi;

    CREATE TABLE public.it_simrs_struk_asuransi
    (
        id character varying(30) COLLATE pg_catalog."default" NOT NULL,
        id_detail_checkup character varying(50) COLLATE pg_catalog."default",
        jenis character varying(50) COLLATE pg_catalog."default",
        url_foto_struk text COLLATE pg_catalog."default",
        approve_flag character varying(1) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        approve_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT it_simrs_struk_asuransi_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.it_simrs_struk_asuransi
        OWNER to postgres;

    ALTER TABLE it_simrs_struk_asuransi ADD COLUMN branch_id VARCHAR(10);
    CREATE SEQUENCE seq_struk_asuransi;

    ALTER TABLE it_simrs_struk_asuransi
        ADD COLUMN id_antrian_telemedic VARCHAR(50);
--

-- 2020-07-20
    ALTER TABLE it_simrs_header_detail_checkup
        ADD COLUMN dibayar_pasien NUMERIC;
--

-- 2020-07-23
    -- Table: public.it_simrs_batal_dokter_telemedic

    -- DROP TABLE public.it_simrs_batal_dokter_telemedic;

    CREATE TABLE public.it_simrs_batal_dokter_telemedic
    (
        id character varying(30) COLLATE pg_catalog."default" NOT NULL,
        id_dokter character varying(50) COLLATE pg_catalog."default",
        id_pelayanan character varying(30) COLLATE pg_catalog."default",
        alasan text COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT it_simrs_dokter_batal_telemedic_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.it_simrs_batal_dokter_telemedic
        OWNER to postgres;

    -- Table: public.it_simrs_batal_telemedic

    -- DROP TABLE public.it_simrs_batal_telemedic;

    CREATE TABLE public.it_simrs_batal_telemedic
    (
        id character varying(30) COLLATE pg_catalog."default" NOT NULL,
        id_antrian_telemedic character varying(30) COLLATE pg_catalog."default",
        id_dokter_batal character varying(30) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        no_jurnal character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT it_simrs_telemedic_batal_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.it_simrs_batal_telemedic
        OWNER to postgres;

    CREATE SEQUENCE seq_batal_dokter_telemedic;
    CREATE SEQUENCE seq_batal_telemedic;

    ALTER TABLE it_simrs_batal_dokter_telemedic ADD COLUMN batal_date DATE;
--

-- 2020-07-24
    ALTER TABLE it_simrs_batal_telemedic ADD COLUMN kembali_konsultasi NUMERIC;
    ALTER TABLE it_simrs_batal_telemedic ADD COLUMN flag_kembali_konsultasi VARCHAR(1);
    ALTER TABLE it_simrs_batal_telemedic ADD COLUMN kembali_resep NUMERIC;
    ALTER TABLE it_simrs_batal_telemedic ADD COLUMN flag_kembali_resep VARCHAR(1);
--

-- 2020-08-05
    ALTER TABLE im_akun_kode_rekening
    ADD COLUMN tipe_budgeting VARCHAR(50);
--

-- 2020-08-06
    -- Table: public.it_notifikasi_admin_telemedic

    -- DROP TABLE public.it_notifikasi_admin_telemedic;

    CREATE TABLE public.it_notifikasi_admin_telemedic
    (
        id character varying(50) COLLATE pg_catalog."default" NOT NULL,
        id_item character varying(50) COLLATE pg_catalog."default",
        keterangan text COLLATE pg_catalog."default",
        user_id character varying(50) COLLATE pg_catalog."default",
        role_id character varying(50) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        branch_id character varying(10) COLLATE pg_catalog."default",
        CONSTRAINT it_notifikasi_admin_telemedic_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.it_notifikasi_admin_telemedic
        OWNER to postgres;

    CREATE SEQUENCE seq_notifikasi_admin_telemedic;
-->>>

-- 2020-08-07
    -- Table: public.im_akun_budgeting_nilai_dasar

    -- DROP TABLE public.im_akun_budgeting_nilai_dasar;

    CREATE TABLE public.im_akun_budgeting_nilai_dasar
    (
        id character varying(50) COLLATE pg_catalog."default" NOT NULL,
        nama_nilai_dasar text COLLATE pg_catalog."default",
        nilai_dasar numeric,
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT im_akun_budgeting_nilai_dasar_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

--================================================================================

    ALTER TABLE public.im_akun_budgeting_nilai_dasar
        OWNER to postgres;

    -- Table: public.it_akun_budgeting_nilai_dasar

    -- DROP TABLE public.it_akun_budgeting_nilai_dasar;

    CREATE TABLE public.it_akun_budgeting_nilai_dasar
    (
        id character varying(50) COLLATE pg_catalog."default" NOT NULL,
        id_nilai_dasar character varying(50) COLLATE pg_catalog."default",
        tahun character varying(10) COLLATE pg_catalog."default",
        branch_id character varying(5) COLLATE pg_catalog."default",
        nilai numeric,
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_who character varying(100) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        CONSTRAINT it_akun_budgeting_nilai_dasar_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.it_akun_budgeting_nilai_dasar
        OWNER to postgres;

--================================================================================
    CREATE SEQUENCE seq_budgeting_nilai_dasar;
    CREATE SEQUENCE seq_trans_budgeting_nilai_dasar;
-- <<<

-- 2020-08-10
    ALTER TABLE im_akun_budgeting_nilai_dasar ADD COLUMN urutan INTEGER;
-- <<<

-- 2020-08-13
    -- Table: public.im_simrs_header_tindakan

    -- DROP TABLE public.im_simrs_header_tindakan;

    CREATE TABLE public.im_simrs_header_tindakan
    (
        id character varying(30) COLLATE pg_catalog."default" NOT NULL,
        nama_tindakan text COLLATE pg_catalog."default",
        id_kategori_tindakan character varying(30) COLLATE pg_catalog."default",
        standard_cost numeric,
        diskon numeric,
        harga_diskon numeric,
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT im_simrs_header_tindakan_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.im_simrs_header_tindakan
        OWNER to postgres;

    ALTER TABLE im_simrs_tindakan ADD id_header_tindakan VARCHAR(30);
    CREATE SEQUENCE seq_header_tindakan;
--

-- 2020-08-14
    CREATE TABLE public.im_akun_jenis_budgeting
    (
        id character varying(50) COLLATE pg_catalog."default" NOT NULL,
        nama_jenis text COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT im_akun_jenis_budgeting_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.im_akun_jenis_budgeting
        OWNER to postgres;
--=================================================================================================
    CREATE TABLE public.im_akun_parameter_budgeting
    (
        id character varying(30) COLLATE pg_catalog."default" NOT NULL,
        nama text COLLATE pg_catalog."default",
        rekening_id character varying(50) COLLATE pg_catalog."default",
        id_jenis_budgeting character varying(50) COLLATE pg_catalog."default",
        tipe character varying(50) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT im_akun_parameter_budgeting_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.im_akun_parameter_budgeting
        OWNER to postgres;
--=================================================================================================
    CREATE TABLE public.it_akun_perhitungan_budgeting
    (
        id character varying(50) COLLATE pg_catalog."default" NOT NULL,
        id_parameter_budgeting character varying(30) COLLATE pg_catalog."default",
        nilai numeric,
        operator character varying(1) COLLATE pg_catalog."default",
        branch_id character varying(55) COLLATE pg_catalog."default",
        tahun character varying(10) COLLATE pg_catalog."default",
        urutan integer,
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT it_akun_perhitungan_budgeting_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.it_akun_perhitungan_budgeting
        OWNER to postgres;

    CREATE SEQUENCE seq_perhitungan_budgeting;
--

-- 2020-08-21

UPDATE im_akun_kode_rekening SET tipe_budgeting = null;
UPDATE im_akun_kode_rekening SET tipe_budgeting = 'biaya' WHERE kode_rekening LIKE '5%';
UPDATE im_akun_kode_rekening SET tipe_budgeting = 'pendapatan' WHERE kode_rekening LIKE '4%';
UPDATE im_akun_kode_rekening SET tipe_budgeting = 'investasi' WHERE kode_rekening LIKE '1%';

UPDATE im_akun_kode_rekening SET tipe_coa = '04' WHERE kode_rekening LIKE '1%';
UPDATE im_akun_kode_rekening SET tipe_coa = '03', flag_divisi = 'Y' WHERE kode_rekening LIKE '5%';
UPDATE im_akun_kode_rekening SET tipe_coa = '02', flag_divisi = 'Y', flag_master = 'Y' WHERE kode_rekening LIKE '4%';

--

-- 2020-08-23

    -- Table: public.im_akun_kategori_parameter_budgeting

    -- DROP TABLE public.im_akun_kategori_parameter_budgeting;

    CREATE TABLE public.im_akun_kategori_parameter_budgeting
    (
        id character varying(30) COLLATE pg_catalog."default" NOT NULL,
        nama text COLLATE pg_catalog."default",
        id_jenis_budgeting character varying(30) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT im_akun_kategori_parameter_budgeting_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.im_akun_kategori_parameter_budgeting
        OWNER to postgres;

    -- Table: public.it_akun_nilai_parameter_budgeting

    -- DROP TABLE public.it_akun_nilai_parameter_budgeting;

    CREATE TABLE public.it_akun_nilai_parameter_budgeting
    (
        id character varying(50) COLLATE pg_catalog."default" NOT NULL,
        id_parameter character varying(30) COLLATE pg_catalog."default",
        nilai_total numeric,
        master_id character varying(50) COLLATE pg_catalog."default",
        divisi_id character varying(50) COLLATE pg_catalog."default",
        branch_id character varying(10) COLLATE pg_catalog."default",
        tahun character varying(5) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT it_akun_nilai_parameter_budgeting_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.it_akun_nilai_parameter_budgeting
        OWNER to postgres;

    ALTER TABLE im_akun_parameter_budgeting
    ADD COLUMN id_kategori_budgeting VARCHAR(30);

    ALTER TABLE	it_akun_perhitungan_budgeting
    ADD COLUMN id_nilai_parameter VARCHAR(50);

    CREATE SEQUENCE seq_nilai_budgeting;

--

-- 2020-08-26

    ALTER TABLE it_akun_nilai_parameter_budgeting
    ADD COLUMN periode VARCHAR(100);

    ALTER TABLE it_akun_nilai_parameter_budgeting
    ADD COLUMN periode VARCHAR(100);

--

-- 2020-08-27

    ALTER TABLE im_akun_parameter_budgeting
    ADD COLUMN divisi_id VARCHAR(30),
    ADD COLUMN master_id VARCHAR(30);

    ALTER TABLE im_akun_budgeting_nilai_dasar
    ADD COLUMN tipe VARCHAR(30);

--

-- 2020-08-28

    -- Table: public.im_akun_parameter_budgeting_rekening

    -- DROP TABLE public.im_akun_parameter_budgeting_rekening;

    CREATE TABLE public.im_akun_parameter_budgeting_rekening
    (
        id character varying(30) COLLATE pg_catalog."default" NOT NULL,
        nama text COLLATE pg_catalog."default",
        rekening_id character varying(50) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT im_akun_parameter_budgeting_rekening_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.im_akun_parameter_budgeting_rekening
        OWNER to postgres;

    CREATE SEQUENCE seq_parameter_budgeting_rekening;

    ALTER TABLE im_akun_parameter_budgeting
    ADD COLUMN id_param_rekening VARCHAR(30);

--

-- 2020-08-30

    -- Table: public.it_akun_nilai_parameter_pengadaaan

    -- DROP TABLE public.it_akun_nilai_parameter_pengadaaan;

    CREATE TABLE public.it_akun_nilai_parameter_pengadaaan
    (
        id character varying(30) COLLATE pg_catalog."default" NOT NULL,
        nama text COLLATE pg_catalog."default",
        nilai numeric,
        qty bigint,
        nilai_total numeric,
        id_nilai_param character varying(50) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT it_akun_nilai_parameter_pengadaaan_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.it_akun_nilai_parameter_pengadaaan
        OWNER to postgres;


    CREATE SEQUENCE seq_nilai_pengadaan;
--

-- 2020-08-03

    CREATE TABLE im_user_vendor (
        id VARCHAR(30) NOT NULL,
        user_id VARCHAR(100),
        id_vendor VARCHAR(30),
        flag VARCHAR(1),
        action VARCHAR(1),
        created_date timestamp without time zone,
        created_who VARCHAR(100),
        last_update timestamp without time zone,
        last_update_who VARCHAR(100),
        CONSTRAINT im_user_vendor_pk PRIMARY KEY (id)
    );

    CREATE SEQUENCE seq_user_vendor;

    CREATE TABLE it_simrs_doc_po (
    	id VARCHAR(30) NOT NULL,
    	id_item VARCHAR(100),
    	id_permintaan_obat_vendor VARCHAR(30),
    	jenis_nomor VARCHAR(100),
    	tipe VARCHAR(10),
    	flag VARCHAR(1),
    	action VARCHAR(1),
    	created_date timestamp without time zone,
    	created_who VARCHAR(100),
    	last_update timestamp without time zone,
    	last_update_who VARCHAR(100),
    	CONSTRAINT it_simrs_doc_po_pk PRIMARY KEY (id)
    );

    CREATE SEQUENCE seq_doc_po;
--

-- 2020-09-04
    ALTER TABLE mt_simrs_transaksi_obat_detail_batch
    ADD COLUMN jenis VARCHAR(50);
--

-- 2020-09-06
    ALTER TABLE it_simrs_doc_po
    ADD COLUMN url_img TEXT,
    ADD COLUMN no_batch INTEGER
--

-- 2020-09-09
    CREATE SEQUENCE seq_nilai_biaya_rutin;

    ALTER TABLE it_akun_perhitungan_budgeting
    ADD COLUMN id_biaya_rutin VARCHAR(50);

    CREATE TABLE public.it_akun_nilai_biaya_rutin
    (
        id character varying(50) COLLATE pg_catalog."default" NOT NULL,
        nama text COLLATE pg_catalog."default",
        id_nilai_parameter character varying(50) COLLATE pg_catalog."default",
        nilai_total numeric,
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT it_akun_nilai_biaya_rutin_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.it_akun_nilai_biaya_rutin
        OWNER to postgres;


    ALTER TABLE mt_simrs_transaksi_obat_detail_batch
    ADD COLUMN tgl_invoice DATE,
    ADD COLUMN tgl_do DATE;
--
=====================================
    --- DARI SINI SIH AKU COBAK ---
=====================================
-- 2020-09-11

     ALTER TABLE it_akun_perhitungan_budgeting
     ADD COLUMN nama_biaya_rutin TEXT;

--

-- 2020-09-16

    ALTER TABLE it_simrs_batas_tutup_period
    ADD COLUMN no_jurnal_koreksi VARCHAR(30),
    ADD COLUMN flag_desember_a VARCHAR(1),
    ADD COLUMN flag_desember_b VARCHAR(1)

--

-- 2020-09-17

    CREATE TABLE public.it_akun_saldo_akhir_tahun
    (
        saldo_akhir_id character varying(20) COLLATE pg_catalog."default" NOT NULL,
        rekening_id character varying(15) COLLATE pg_catalog."default",
        periode character varying(7) COLLATE pg_catalog."default",
        jumlah_debit numeric(20,2),
        jumlah_kredit numeric(20,2),
        saldo numeric(20,2),
        posisi character varying(1) COLLATE pg_catalog."default",
        branch_id character varying(5) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update_who character varying(100) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        last_update timestamp without time zone,
        master_id character varying(20) COLLATE pg_catalog."default",
        pasien_id character varying(30) COLLATE pg_catalog."default",
        CONSTRAINT it_akun_saldo_akhir_tahun_pkey PRIMARY KEY (saldo_akhir_id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.it_akun_saldo_akhir_tahun
        OWNER to postgres;

    -------------------------------------------------------------------------

    CREATE TABLE public.it_akun_saldo_akhir_detail_tahun
        (
            id character varying(20) COLLATE pg_catalog."default" NOT NULL,
            saldo_akhir_id character varying(20) COLLATE pg_catalog."default",
            rekening_id character varying(15) COLLATE pg_catalog."default",
            periode character varying(7) COLLATE pg_catalog."default",
            jumlah_debit numeric(20,2),
            jumlah_kredit numeric(20,2),
            saldo numeric(20,2),
            posisi character varying(1) COLLATE pg_catalog."default",
            branch_id character varying(5) COLLATE pg_catalog."default",
            flag character varying(1) COLLATE pg_catalog."default",
            action character varying(1) COLLATE pg_catalog."default",
            created_who character varying(100) COLLATE pg_catalog."default",
            last_update_who character varying(100) COLLATE pg_catalog."default",
            created_date timestamp without time zone,
            last_update timestamp without time zone,
            master_id character varying(20) COLLATE pg_catalog."default",
            pasien_id character varying(30) COLLATE pg_catalog."default",
            divisi_id character varying(30) COLLATE pg_catalog."default",
            kd_barang character varying(100) COLLATE pg_catalog."default",
            CONSTRAINT it_akun_saldo_akhir_detail_tahun_pkey PRIMARY KEY (id)
        )
        WITH (
            OIDS = FALSE
        )
        TABLESPACE pg_default;

        ALTER TABLE public.it_akun_saldo_akhir_detail_tahun
            OWNER to postgres;

    CREATE SEQUENCE seq_saldo_akhir_tahun;
    CREATE SEQUENCE seq_saldo_akhir_tahun_detail;
--

-- 2020-09-18

    -- Table: public.it_akun_jurnal

    -- DROP TABLE public.it_akun_jurnal;

    CREATE TABLE public.it_akun_jurnal_akhir_tahun
    (
        no_jurnal character varying(12) COLLATE pg_catalog."default" NOT NULL,
        tipe_jurnal_id character varying(10) COLLATE pg_catalog."default" NOT NULL,
        tanggal_jurnal date,
        sumber character varying(16) COLLATE pg_catalog."default",
        sumber_dana_id character varying(3) COLLATE pg_catalog."default",
        carry_over character varying(5) COLLATE pg_catalog."default",
        mata_uang_id character varying(3) COLLATE pg_catalog."default" NOT NULL,
        kurs numeric(13,2) NOT NULL,
        keterangan character varying(300) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default" NOT NULL,
        created_who character varying(100) COLLATE pg_catalog."default" NOT NULL,
        branch_id character varying(5) COLLATE pg_catalog."default" NOT NULL,
        created_date timestamp without time zone NOT NULL,
        last_update timestamp(4) without time zone,
        printed_date date,
        printed_flag character varying(1) COLLATE pg_catalog."default",
        registered_date date,
        registered_flag character varying(1) COLLATE pg_catalog."default",
        registered_user character varying(30) COLLATE pg_catalog."default",
        register_id character varying(15) COLLATE pg_catalog."default",
        spum_id character varying(100) COLLATE pg_catalog."default",
        print_count numeric(10,0) DEFAULT 0,
        print_register_count numeric(10,0) NOT NULL DEFAULT 0,
        re_printed_date date,
        re_registered_date date,
        cara_penerimaan character varying(30) COLLATE pg_catalog."default",
        no_seri_pajak_dipungut character varying(20) COLLATE pg_catalog."default",
        no_seri_pajak_ditanggung character varying(20) COLLATE pg_catalog."default",
        personal character varying(50) COLLATE pg_catalog."default",
        pos_anggaran character varying(50) COLLATE pg_catalog."default",
        bukti_pendukung character varying(50) COLLATE pg_catalog."default",
        tanggal_pendukung date,
        dpp_dipungut numeric(14,2),
        dpp_ditanggung numeric(14,2),
        last_update_who character varying(100) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        pengajuan_biaya_id character varying(50) COLLATE pg_catalog."default"
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.it_akun_jurnal_akhir_tahun
        OWNER to postgres;

    -------------------------------------------------------------------------------------------------------------------

    -- Table: public.it_akun_jurnal_detail

    -- DROP TABLE public.it_akun_jurnal_detail;

    CREATE TABLE public.it_akun_jurnal_detail_akhir_tahun
    (
        no_jurnal character varying(12) COLLATE pg_catalog."default" NOT NULL,
        rekening_id character varying(12) COLLATE pg_catalog."default" NOT NULL,
        master_id character varying(17) COLLATE pg_catalog."default",
        no_nota character varying(30) COLLATE pg_catalog."default",
        jumlah_debit numeric(19,2) NOT NULL,
        jumlah_kredit numeric(19,2) NOT NULL,
        biaya character varying(6) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        last_update timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update_who character varying(100) COLLATE pg_catalog."default",
        jurnal_detail_id character varying(20) COLLATE pg_catalog."default" NOT NULL,
        kd_barang character varying(30) COLLATE pg_catalog."default",
        pasien_id character varying(30) COLLATE pg_catalog."default",
        nomor_rekening character varying(30) COLLATE pg_catalog."default",
        divisi_id character varying(10) COLLATE pg_catalog."default",
        CONSTRAINT it_akun_jurnal_detail_akhir_tahun_pkey PRIMARY KEY (jurnal_detail_id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.it_akun_jurnal_detail_akhir_tahun
        OWNER to postgres;

    -------------------------------------------------------------------------------------------------------------------

    CREATE SEQUENCE seq_jurnal_akhir_tahun;
    CREATE SEQUENCE seq_jurnal_detail_akhir_tahun;

    ALTER TABLE it_akun_jurnal_akhir_tahun
    ADD COLUMN tipe_periode VARCHAR(5);

    ALTER TABLE it_akun_jurnal_detail_akhir_tahun
    ADD COLUMN jurnal_detail_id VARCHAR(30);

--

-- 2020-09-23

    ALTER TABLE it_akun_saldo_akhir_tahun
      RENAME TO it_akun_saldo_history;

    ALTER TABLE it_akun_saldo_akhir_detail_tahun
      RENAME TO it_akun_saldo_akhir_detail_history;
--

-- 2020-09-25

    UPDATE im_akun_mapping_jurnal SET kirim_list = 'Y'
    WHERE keterangan = 'uang_muka'
    AND trans_id NOT IN ('04','34');

--

-- 2020-09-27

    ALTER TABLE mt_simrs_transaksi_obat_detail_batch
    ADD COLUMN harga_jual numeric,
    ADD COLUMN harga_rata numeric

    ALTER TABLE mt_simrs_transaksi_obat_detail_batch
    ADD COLUMN qty_reture bigint


--

-- 2020-09-28

    ALTER TABLE mt_simrs_harga_obat
    ADD COLUMN id_harga_obat VARCHAR(50),
    ADD COLUMN margin int,
    ADD COLUMN branch_id VARCHAR(5);

    UPDATE mt_simrs_harga_obat a SET id_harga_obat = 'RS01' || a.id_obat, margin = '10', branch_id = 'RS01';

    ALTER TABLE mt_simrs_harga_obat
    DROP CONSTRAINT pk_harga_obat;

    ALTER TABLE mt_simrs_harga_obat
    ADD CONSTRAINT pk_harga_obat
    PRIMARY KEY (id_harga_obat);

    CREATE TABLE public.im_simrs_margin_obat
    (
        id_margin_obat character varying(50) COLLATE pg_catalog."default" NOT NULL,
        id_obat character varying(30) COLLATE pg_catalog."default",
        standar_margin integer,
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_date_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT im_simrs_margin_obat_pkey PRIMARY KEY (id_margin_obat)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.im_simrs_margin_obat
        OWNER to postgres;

    CREATE SEQUENCE seq_margin_obat;

--

-- 2020-09-30

    CREATE TABLE public.im_simrs_header_obat
    (
        id_obat character varying(50) COLLATE pg_catalog."default" NOT NULL,
        nama_obat text COLLATE pg_catalog."default",
        id_pabrik character varying(100) COLLATE pg_catalog."default",
        lembar_per_box bigint,
        biji_per_lembar bigint,
        flag_kronis character varying(1) COLLATE pg_catalog."default",
        flag_bpjs character varying(1) COLLATE pg_catalog."default",
        flag_generic character varying(1) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT im_simrs_header_obat_pkey PRIMARY KEY (id_obat)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.im_simrs_header_obat
        OWNER to postgres;

    ALTER TABLE im_simrs_header_obat
    ADD COLUMN id_kategori_persediaan VARCHAR(30);

    CREATE TABLE public.im_simrs_kategori_persediaan
    (
        id_kategori_persediaan character varying(30) COLLATE pg_catalog."default" NOT NULL,
        nama text COLLATE pg_catalog."default",
        rekening_id character varying(30) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT im_simrs_kategori_persediaan_pkey PRIMARY KEY (id_kategori_persediaan)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.im_simrs_kategori_persediaan
        OWNER to postgres;

    CREATE SEQUENCE seq_kategori_persediaan;

    ALTER TABLE im_simrs_header_obat
    ADD COLUMN min_stok bigint;

    ALTER TABLE im_simrs_header_obat
    ADD COLUMN merk varchar(100);

    -- insert data header obat
    INSERT INTO im_simrs_header_obat
    (id_obat,
    nama_obat,
    id_pabrik,
    lembar_per_box,
    biji_per_lembar,
    min_stok,
    merk
    )
    SELECT
    id_obat,
    nama_obat,
    id_pabrik,
    lembar_per_box,
    biji_per_lembar,
    min_stok,
    merk
    FROM im_simrs_obat
    GROUP BY
    id_obat,
    nama_obat,
    id_pabrik,
    lembar_per_box,
    biji_per_lembar,
    min_stok,
    merk;

    -- end

    UPDATE im_simrs_header_obat SET
    flag = 'Y',
    action = 'C',
    created_date = now(),
    created_who = 'migrasi_admin',
    last_update = now(),
    last_update_who = 'migrasi_admin';

--

-- 2020-10-09

    -- Table: public.im_simrs_bentuk_barang

    -- DROP TABLE public.im_simrs_bentuk_barang;

    CREATE TABLE public.im_simrs_bentuk_barang    (
        id_bentuk character varying(30) COLLATE pg_catalog."default" NOT NULL,
        bentuk character varying(100) COLLATE pg_catalog."default",
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT im_simrs_bentuk_barang_pkey PRIMARY KEY (id_bentuk)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.im_simrs_bentuk_barang
        OWNER to postgres;

--

-- 2020-10-12

    ALTER TABLE it_akun_perhitungan_budgeting
    ADD COLUMN id_trans_nilai_dasar VARCHAR(50);

--

-- 2020-11-17

    ALTER TABLE im_simrs_header_tindakan
    ADD COLUMN flag_konsul_tele VARCHAR(1);

--

-- 2020-12-02

    ALTER TABLE im_roles
    ADD COLUMN tipe_pelayanan VARCHAR(100);

    UPDATE im_roles SET tipe_pelayanan = 'rawat_jalan'
    WHERE role_id = '34';

    UPDATE im_roles SET tipe_pelayanan = 'igd'
    WHERE role_id = '35';

    UPDATE im_roles SET tipe_pelayanan = 'apotek'
    WHERE role_id = '36';

    UPDATE im_roles SET tipe_pelayanan = 'gudang_obat'
    WHERE role_id = '37';

--

-- 2020-12-07

    -- Table: public.mt_simrs_harga_terakhir

    -- DROP TABLE public.mt_simrs_harga_terakhir;

    CREATE TABLE public.mt_simrs_harga_terakhir
    (
        id character varying(100) COLLATE pg_catalog."default" NOT NULL,
        id_obat character varying(100) COLLATE pg_catalog."default",
        id_barang character varying(100) COLLATE pg_catalog."default",
        branch_id character varying(5) COLLATE pg_catalog."default",
        harga_terakhir numeric,
        flag character varying(1) COLLATE pg_catalog."default",
        action character varying(1) COLLATE pg_catalog."default",
        created_date timestamp without time zone,
        created_who character varying(100) COLLATE pg_catalog."default",
        last_update timestamp without time zone,
        last_update_who character varying(100) COLLATE pg_catalog."default",
        CONSTRAINT mt_simrs_harga_terakhir_pkey PRIMARY KEY (id)
    )
    WITH (
        OIDS = FALSE
    )
    TABLESPACE pg_default;

    ALTER TABLE public.mt_simrs_harga_terakhir
        OWNER to postgres;

    ALTER TABLE mt_simrs_harga_obat
    ADD COLUMN diskon_umum numeric,
    ADD COLUMN harga_jual_umum numeric;

    ALTER TABLE mt_simrs_harga_obat
    ADD COLUMN margin_umum integer;

    ALTER TABLE mt_simrs_harga_obat
    ADD COLUMN harga_net_umum numeric;

--

2020-12-10 --
    CREATE SEQUENCE seq_harga_terakhir;
--

2020-12-11 --

  ALTER TABLE im_simrs_header_obat
  ADD COLUMN id_bentuk VARCHAR(30);

--

2020-12-14 --

    ALTER TABLE im_simrs_header_obat
    ADD COLUMN flag_parenteral VARCHAR(1),
    ADD COLUMN id_jenis_obat VARCHAR(30);

    ALTER TABLE im_simrs_header_obat
    ADD COLUMN id_sub_jenis VARCHAR(30);

    ALTER TABLE im_simrs_header_obat
    ADD COLUMN flag_is_formularium VARCHAR(1);

    CREATE TABLE im_simrs_jenis_persediaan_obat(
    	id varchar(30) NOT NULL primary key,
    	nama varchar(100),
    	flag varchar(1),
    	action varchar(1),
    	created_date timestamp without time zone,
    	created_who varchar(100),
    	last_update timestamp without time zone,
    	last_update_who varchar(100)
    )

    CREATE TABLE im_simrs_jenis_persediaan_obat_sub(
    	id varchar(30) NOT NULL primary key,
    	nama varchar(100),
    	id_jenis_obat varchar(30),
    	flag varchar(1),
    	action varchar(1),
    	created_date timestamp without time zone,
    	created_who varchar(100),
    	last_update timestamp without time zone,
    	last_update_who varchar(100)
    )

    CREATE TABLE im_simrs_paremeter_keterangan_obat(
    	id varchar(30) NOT NULL primary key,
    	nama varchar(100),
    	flag varchar(1),
    	action varchar(1),
    	created_date timestamp without time zone,
    	created_who varchar(100),
    	last_update timestamp without time zone,
    	last_update_who varchar(100)
    )

    CREATE TABLE im_simrs_keterangan_obat(
    	id varchar(30) NOT NULL primary key,
    	id_sub_jenis varchar(30),
    	id_parameter_keterangan varchar(30),
    	keterangan varchar(100),
    	flag varchar(1),
    	action varchar(1),
    	created_date timestamp without time zone,
    	created_who varchar(100),
    	last_update timestamp without time zone,
    	last_update_who varchar(100)
    )

--

2020-12-17 --

    CREATE SEQUENCE seq_parameter_budgeting;

--

2020-12-19 --

    ALTER TABLE im_simrs_keterangan_obat
    ADD COLUMN warna_label VARCHAR(100),
    ADD COLUMN warna_background VARCHAR(100);

    CREATE SEQUENCE seq_keterangan_obat;

    -- add function :
        Keterangan Obat             ; keterangan obat           ; /keteranganobat/initForm_keteranganobat.action; is menu   ; parent : Master (6000);
        Init Form Keterangan obat   ; init form keterangan obat ; /keteranganobat/initForm_keteranganobat.action;           ; parent : Keterangan Obat;

    -- role : Admin Gudang
--

2020-12-21 --

    CREATE table it_simrs_keterangan_resep (
    	id varchar(30) NOT NULL PRIMARY KEY,
    	id_jenis_obat VARCHAR(30),
    	id_keterangan_obat VARCHAR(30),
    	keterangan_lain TEXT,
    	flag VARCHAR(1),
    	action VARCHAR(1),
    	created_date TIMESTAMP WITHOUT TIME ZONE,
    	created_who VARCHAR(100),
    	last_update TIMESTAMP WITHOUT TIME ZONE,
    	last_update_who VARCHAR(100)
    )

    CREATE SEQUENCE seq_trans_keterangan_obat;

    ALTER TABLE it_simrs_keterangan_resep
    ADD COLUMN id_obat VARCHAR(50),
    ADD COLUMN id_permintaan_resep VARCHAR(50);

    ALTER TABLE im_simrs_paremeter_keterangan_obat
    ADD COLUMN flag_label_waktu VARCHAR(1);

--

-- 2021-01-05

    ALTER TABLE im_position
    ADD COLUMN status_pegawai VARCHAR(5);

    ALTER TABLE im_hris_jenis_pegawai
    ADD COLUMN persen_gaji NUMERIC,
    ADD COLUMN flag_default VARCHAR(1);

--

-- 2021-01-06

    ALTER TABLE im_hris_kelompok_position
    ADD COLUMN flag_is_multiple_person VARCHAR(1);

--

-- 2021-01-07
    ALTER TABLE it_hris_pegawai_position
    ADD COLUMN jenis_pegawai VARCHAR(5),
    ADD COLUMN flag_digaji VARCHAR(1);
--

-- 2020-01-10

    ALTER TABLE im_hris_pegawai
    ADD COLUMN tanggal_keluar DATE;

--

-- 2021-01-12

    ALTER TABLE imt_hris_history_jabatan_pegawai
    ADD COLUMN jenis_pegawai VARCHAR(5),
    ADD COLUMN flag_digaji VARCHAR(1);

--

-- 2021-01-13

    ALTER TABLE it_hris_mutasi_jabatan
    ADD COLUMN no_sk VARCHAR(100);

    ALTER TABLE it_hris_mutasi_jabatan
    ADD COLUMN id_ket VARCHAR(100);

--

-- 2021-01-28

    ALTER TABLE it_simrs_pembayaran_online
    ADD COLUMN tanggal_upload TIMESTAMP WITHOUT TIME ZONE;

--

-- 2021-02-01

    ALTER TABLE it_simrs_pembayaran_online
    ADD COLUMN shift_id VARCHAR(5);

    ALTER TABLE im_hris_shift
    ADD COLUMN tipe_shift_kasir VARCHAR(100);

    UPDATE Im_roles SET tipe_pelayanan = 'admin_telemedicine' WHERE role_id = '47'

--

-- 2021-02-02

    -- tambahkan function
    funcid = 3320; func_name = print laporan kas masuk;  url = /onlinepaymentverif/print_onlinepaymentverif.action; parent = 2252;

    -- setting pada role 47

    -- update shift malam per tanggal untuk test. jgn di run !!!
    UPDATE it_simrs_pembayaran_online SET shift_id = 'SM02'
    WHERE DATE(last_update) = '2021-02-01'
    AND last_update >= '2021-02-01 12:00'
--

-- 2021-02-16

    CREATE TABLE im_simrs_pabrik_obat(
    	id VARCHAR(50) NOT NULL PRIMARY KEY,
    	nama TEXT,
    	flag VARCHAR(1),
    	action VARCHAR(1),
    	created_date TIMESTAMP WITHOUT TIME ZONE,
    	created_who VARCHAR(100),
    	last_update TIMESTAMP WITHOUT TIME ZONE,
    	last_update_who VARCHAR(100)
    );

    CREATE SEQUENCE seq_pabrik_obat;

    ALTER TABLE im_simrs_obat
    ADD COLUMN id_pabrik_obat VARCHAR(50);
--

-- 2021-02-17

    ALTER TABLE mt_simrs_transaksi_obat_detail
    ADD COLUMN id_pabrik_obat VARCHAR(50);

    ALTER TABLE mt_simrs_transaksi_obat_detail_batch
    ADD COLUMN id_pabrik_obat VARCHAR(50);

--

-- 2021-03-02

    CREATE TABLE migrasi_dokter (
    	status VARCHAR(1),
    	nama_pelayanan TEXT,
    	nama_dokter TEXT,
    	dpjp VARCHAR(100),
    	nip VARCHAR(100) PRIMARY KEY,
    	branch_id VARCHAR(5),
    	id_pelayanan VARCHAR(100)

--

--2021-03-10

    ALTER TABLE im_simrs_detail_rekanan_ops
    ADD COLUMN id_item VARCHAR(100),
    ADD COLUMN jenis_item VARCHAR(100),
    ADD COLUMN tarif NUMERIC;

    ALTER TABLE im_simrs_detail_rekanan_ops
    ADD COLUMN parent_id VARCHAR(100),
    ADD COLUMN flag_parent VARCHAR(1);

--

--2021-03-16

    ALTER TABLE im_simrs_detail_rekanan_ops
    ADD COLUMN tarif_bpjs numeric(10,2),
    ADD COLUMN diskon_non_bpjs numeric(10,2),
    ADD COLUMN diskon_bpjs numeric(10,2);

--